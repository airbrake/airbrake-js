!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.airbrakeJs=t():e.airbrakeJs=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=15)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r={};for(var n in e)r[n]=(0,s.default)(e[n],t);return r}function i(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64e3,n=void 0;;){if(e.params=o(e.params,t),e.environment=o(e.environment,t),e.session=o(e.session,t),n=JSON.stringify(e),n.length<r)return n;if(0===t)break;t=Math.floor(t/2)}var i=new Error("airbrake-js: cannot jsonify notice (length="+n.length+" maxLength="+r+")");throw i.params={json:n.slice(0,Math.floor(t/2))+"..."},i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(6),s=n(a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return function(t,r,n,o,i){i&&e.notify(i),e.notify({error:{message:t,fileName:r,lineNumber:n,columnNumber:o}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(8),u=n(s),c=r(7),f=n(c),l=r(4),p=n(l),d=r(5),v=n(d),h=r(3),y=n(h),m=r(11),g=r(9),b=n(g),j=r(12),w=n(j),O=r(10),k=n(O);t.Client=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.opts={},this.reporters=[],this.filters=[],this.opts.projectId=t.projectId,this.opts.projectKey=t.projectKey,t.host?this.opts.host=t.host:this.opts.host="https://api.airbrake.io",t.processor?this.processor=t.processor:this.processor=f.default,t.reporter?this.addReporter(t.reporter):this.addReporter((0,m.detectReporter)(t)),this.addFilter(p.default),this.addFilter(v.default),this.addFilter(y.default),this.onerror=i(this),window.onerror||t.onerror===!1||(window.onerror=this.onerror)}return a(e,[{key:"setProject",value:function(e,t){this.opts.projectId=e,this.opts.projectKey=t}},{key:"setHost",value:function(e){this.opts.host=e}},{key:"addReporter",value:function(e){var t=void 0;switch(e){case"compat":t=b.default;break;case"xhr":t=w.default;break;case"jsonp":t=k.default;break;default:t=e}this.reporters.push(t)}},{key:"addFilter",value:function(e){this.filters.push(e)}},{key:"notify",value:function(e){var t=this,r={language:"JavaScript",notifier:{name:"airbrake-js",version:"0.6.0-beta.2",url:"https://github.com/airbrake/airbrake-js"}};window.navigator&&window.navigator.userAgent&&(r.userAgent=window.navigator.userAgent),window.location&&(r.url=String(window.location),r.rootDirectory=window.location.protocol+"//"+window.location.host);var n=new u.default;return this.processor(e.error||e,function(o,i){var a={id:"",errors:[i],context:Object.assign(r,e.context),params:e.params||{},environment:e.environment||{},session:e.session||{}};for(var s in t.filters){var u=t.filters[s];if(a=u(a),null===a||a===!1)return}for(var c in t.reporters){var f=t.reporters[c];f(a,t.opts,n)}}),n}},{key:"wrapArguments",value:function(e){for(var t in e){var r=e[t];"function"==typeof r&&(e[t]=this.wrap(r))}return e}},{key:"wrap",value:function(e){if(e.__airbrake__)return e;var t=this,r=function(){var r=Array.prototype.slice.call(arguments),n=t.wrapArguments(r);try{return e.apply(this,n)}catch(e){return void t.notify({error:e,params:{arguments:r}})}};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r.__airbrake__=!0,r.__inner__=e,r}},{key:"call",value:function(e){var t=this.wrap(e);return t.apply(this,Array.prototype.slice.call(arguments,1))}}]),e}()},function(e,t,r){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t;r<this.length;r++)if(this[r]===e)return r;return-1}),Object.assign||(Object.assign=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=function(t){var n=r[t];n&&Object.keys(n).forEach(function(t){return e[t]=n[t]})};for(var i in r)o(i);return e})},function(e,t,r){"use strict";function n(e){var t=e.errors[0];if(""!==t.type&&"Error"!==t.type)return e;var r=t.message.match(o);return null!==r&&(t.type=r[1],t.message=r[2]),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=new RegExp(["^","\\[(\\$.+)\\]","\\s","(.+)","$"].join(""))},function(e,t,r){"use strict";function n(e){var t=e.errors[0].message;return o.indexOf(t)>-1?null:e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=["Script error","Script error."]},function(e,t,r){"use strict";function n(e){var t=e.errors[0];if(""!==t.type&&"Error"!==t.type)return e;var r=t.message.match(o);return null!==r&&(t.type=r[1],t.message=r[2]),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=new RegExp(["^","Uncaught\\s","(.+?)",":\\s","(.+)","$"].join(""))},function(e,t,r){"use strict";function n(e,t){try{return e[t]}catch(e){return}}function o(e){function t(e){for(var t=c.indexOf(e),r=[u[t]],o=t;o>=0;o--)c[o]&&n(c[o],r[0])===e&&(e=c[o],r.unshift(u[o]));return"~"+r.join(".")}function r(e){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(s++,s>o)return"[Truncated]";if(null===e||void 0===e)return e;switch("undefined"==typeof e?"undefined":i(e)){case"boolean":case"number":case"string":case"function":return e;case"object":break;default:return String(e)}if(e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(c.indexOf(e)>=0)return"[Circular "+t(e)+"]";if(l++,l>a)return"[Truncated]";if(u.push(f),c.push(e),s--,"[object Array]"===Object.prototype.toString.apply(e)){var p=[];for(var d in e){var v=e[d];if(s++,s>=o)break;p.push(r(v,d,l))}return p}var h={};for(f in e)if(Object.prototype.hasOwnProperty.call(e,f)){if(s++,s>=o)break;var y=n(e,f);void 0!==y&&(h[f]=r(y,f,l))}return h}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,s=0,u=[],c=[];return r(e)}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=void 0;try{r=a.default.parse(e)}catch(e){console&&console.warn&&console.warn("airbrake-js: error-stack-parser failed",e),r=[]}var n=[];for(var o in r){var i=r[o];n.push({function:i.functionName||"",file:i.fileName,line:i.lineNumber,column:i.columnNumber})}var s=void 0;s=e.name?e.name:"";var u=void 0;return u=e.message?String(e.message):String(e),""===s&&""===u&&0===n.length?void(console&&console.warn&&console.warn("airbrake: can not process error",e)):void t("stacktracejs",{type:s,message:u,backtrace:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=r(13),a=n(i)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t){n(this,e),this.onResolved=[],this.onRejected=[],t&&t(this.resolve.bind(this),this.reject.bind(this))}return o(e,[{key:"then",value:function(e,t){return e&&(this.resolvedWith?e(this.resolvedWith):this.onResolved.push(e)),t&&(this.rejectedWith?t(this.rejectedWith):this.onRejected.push(t)),this}},{key:"catch",value:function(e){return this.rejectedWith?e(this.rejectedWith):this.onRejected.push(e),this}},{key:"resolve",value:function(e){if(this.resolvedWith||this.rejectedWith)throw new Error("Promise is already resolved or rejected");this.resolvedWith=e;for(var t in this.onResolved){var r=this.onResolved[t];r(e)}return this}},{key:"reject",value:function(e){if(this.resolvedWith||this.rejectedWith)throw new Error("Promise is already resolved or rejected");this.rejectedWith=e;for(var t in this.onRejected){var r=this.onRejected[t];r(e)}return this}}]),e}();t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var n=t.host+"/api/v3/projects/"+t.projectId+"/create-notice?key="+t.projectKey,o=(0,a.default)(e),i=new XMLHttpRequest;i.open("POST",n,!0),i.send(o),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var t=JSON.parse(i.responseText);e.id=t.id,r.resolve(e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=r(0),a=n(i)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){s++;var n="airbrakeCb"+String(s);window[n]=function(t){e.id=t.id,r.resolve(e);try{delete window[n]}catch(e){window[n]=void 0}};var o=encodeURIComponent((0,a.default)(e)),i=t.host+"/api/v3/projects/"+t.projectId+"/create-notice?key="+t.projectKey+"&callback="+n+"&body="+o,u=window.document,c=u.getElementsByTagName("head")[0],f=u.createElement("script");f.src=i;var l=function(){return c.removeChild(f)};f.onload=l,f.onerror=l,c.appendChild(f)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=r(0),a=n(i),s=0},function(e,t,r){"use strict";function n(e){var t=XMLHttpRequest;return!e.host&&t?"compat":t?"xhr":"jsonp"}Object.defineProperty(t,"__esModule",{value:!0}),t.detectReporter=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var n=t.host+"/api/v3/projects/"+t.projectId+"/notices?key="+t.projectKey,o=(0,a.default)(e),i=new XMLHttpRequest;i.open("POST",n,!0),i.setRequestHeader("Content-Type","application/json"),i.send(o),i.onreadystatechange=function(){if(4===i.readyState&&201===i.status){var t=JSON.parse(i.responseText);e.id=t.id,r.resolve(e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=r(0),a=n(i)},function(e,t,r){var n,o,i;!function(a,s){"use strict";o=[r(14)],n=s,i="function"==typeof n?n.apply(t,o):n,!(void 0!==i&&(e.exports=i))}(this,function(e){"use strict";var t=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,n=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(e.indexOf(":")===-1)return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,r=t.exec(e.replace(/[\(\)]/g,""));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(t){var n=t.stack.split("\n").filter(function(e){return!!e.match(r)},this);return n.map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(r.pop()),o=r.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(n[0])>-1?void 0:n[0];return new e({functionName:o,fileName:i,lineNumber:n[1],columnNumber:n[2],source:t})},this)},parseFFOrSafari:function(t){var r=t.stack.split("\n").filter(function(e){return!e.match(n)},this);return r.map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return new e({functionName:t});var r=t.split("@"),n=this.extractLocation(r.pop()),o=r.join("@")||void 0;return new e({functionName:o,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:t})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),o=[],i=2,a=n.length;i<a;i+=2){var s=r.exec(n[i]);s&&o.push(new e({fileName:s[2],lineNumber:s[1],source:n[i]}))}return o},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),o=[],i=0,a=n.length;i<a;i+=2){var s=r.exec(n[i]);s&&o.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:n[i]}))}return o},parseOpera11:function(r){var n=r.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this);return n.map(function(t){var r,n=t.split("@"),o=this.extractLocation(n.pop()),i=n.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(r=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e({functionName:a,args:s,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})},this)}}})},function(e,t,r){var n,o,i;!function(r,a){"use strict";o=[],n=a,i="function"==typeof n?n.apply(t,o):n,!(void 0!==i&&(e.exports=i))}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e[0].toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}function n(e){if(e instanceof Object)for(var r=o.concat(i.concat(a.concat(s))),n=0;n<r.length;n++)e.hasOwnProperty(r[n])&&void 0!==e[r[n]]&&this["set"+t(r[n])](e[r[n]])}var o=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],a=["fileName","functionName","source"],s=["args"];n.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof n)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new n(e)}},toString:function(){var t=this.getFunctionName()||"{anonymous}",r="("+(this.getArgs()||[]).join(",")+")",n=this.getFileName()?"@"+this.getFileName():"",o=e(this.getLineNumber())?":"+this.getLineNumber():"",i=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return t+r+n+o+i}};for(var u=0;u<o.length;u++)n.prototype["get"+t(o[u])]=r(o[u]),n.prototype["set"+t(o[u])]=function(e){return function(t){this[e]=Boolean(t)}}(o[u]);for(var c=0;c<i.length;c++)n.prototype["get"+t(i[c])]=r(i[c]),n.prototype["set"+t(i[c])]=function(t){return function(r){if(!e(r))throw new TypeError(t+" must be a Number");this[t]=Number(r)}}(i[c]);for(var f=0;f<a.length;f++)n.prototype["get"+t(a[f])]=r(a[f]),n.prototype["set"+t(a[f])]=function(e){return function(t){this[e]=String(t)}}(a[f]);return n})},function(e,t,r){r(2),e.exports=r(1)}])});
//# sourceMappingURL=client.min.js.map