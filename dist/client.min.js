!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.Client=r():(e.airbrakeJs=e.airbrakeJs||{},e.airbrakeJs.Client=r())}(this,function(){return function(e){function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var t={};return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=18)}([function(e,r,t){"use strict";function o(e,r){void 0===r&&(r=1e3);var t={};for(var o in e)t[o]=i.default(e[o],r);return t}function n(e,r,t){void 0===r&&(r=1e3),void 0===t&&(t=64e3);for(var n;;){if(e.params=o(e.params,r),e.environment=o(e.environment,r),e.session=o(e.session,r),n=JSON.stringify(e),n.length<t)return n;if(0===r)break;r=Math.floor(r/2)}var i=new Error("airbrake-js: cannot jsonify notice (length="+n.length+" maxLength="+t+")");throw i.params={json:n.slice(0,Math.floor(r/2))+"..."},i}var i=t(10);Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},function(module,exports,__webpack_require__){"use strict";function makeOnErrorHandler(e){return function(r,t,o,n,i){return i?void e.notify(i):void e.notify({error:{message:r,fileName:t,lineNumber:o,columnNumber:n}})}}var promise_1=__webpack_require__(12),stacktracejs_1=__webpack_require__(11),window_1=__webpack_require__(9),node_1=__webpack_require__(6),script_error_1=__webpack_require__(7),uncaught_message_1=__webpack_require__(8),angular_message_1=__webpack_require__(5),reporter_1=__webpack_require__(16),node_2=__webpack_require__(15),compat_1=__webpack_require__(13),xhr_1=__webpack_require__(17),jsonp_1=__webpack_require__(14),Client=function(){function Client(opts){void 0===opts&&(opts={});var _this=this;this.opts={},this.reporters=[],this.filters=[],this.opts.projectId=opts.projectId,this.opts.projectKey=opts.projectKey,this.opts.host=opts.host||"https://api.airbrake.io",this.opts.timeout=opts.timeout||1e4,this.processor=opts.processor||stacktracejs_1.default,this.addReporter(opts.reporter||reporter_1.detectReporter(opts)),this.addFilter(script_error_1.default),this.addFilter(uncaught_message_1.default),this.addFilter(angular_message_1.default),this.onerror=makeOnErrorHandler(this),"undefined"!=typeof window?(this.addFilter(window_1.default),window.onerror||opts.onerror||(window.onerror=this.onerror)):(this.addFilter(node_1.default),opts.uncaughtException||eval("process").on("uncaughtException",function(e){throw _this.notify(e),e}))}return Client.prototype.setProject=function(e,r){this.opts.projectId=e,this.opts.projectKey=r},Client.prototype.setHost=function(e){this.opts.host=e},Client.prototype.addReporter=function(e){var r;switch(e){case"node":r=node_2.default;break;case"compat":r=compat_1.default;break;case"xhr":r=xhr_1.default;break;case"jsonp":r=jsonp_1.default;break;default:r=e}this.reporters.push(r)},Client.prototype.addFilter=function(e){this.filters.push(e)},Client.prototype.notify=function(e){var r=this,t=Object.assign({language:"JavaScript",notifier:{name:"airbrake-js",version:"0.6.0",url:"https://github.com/airbrake/airbrake-js"}},e.context),o={id:"",errors:null,context:t,params:e.params||{},environment:e.environment||{},session:e.session||{}},n=new promise_1.default;return this.processor(e.error||e,function(e,t){o.errors=[t];for(var i=0,s=r.filters;i<s.length;i++){var a=s[i];if(o=a(o),null===o||o===!1)return}for(var c=0,u=r.reporters;c<u.length;c++){var p=u[c];p(o,r.opts,n)}}),n},Client.prototype.wrapArguments=function(e){for(var r in e){var t=e[r];"function"==typeof t&&(e[r]=this.wrap(t))}return e},Client.prototype.wrap=function(e){if(e.__airbrake__)return e;var r=this,t=function(){var t=Array.prototype.slice.call(arguments),o=r.wrapArguments(t);try{return e.apply(this,o)}catch(e){return void r.notify({error:e,params:{arguments:t}})}};for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t.__airbrake__=!0,t.__inner__=e,t},Client.prototype.call=function(e){var r=this.wrap(e);return r.apply(this,Array.prototype.slice.call(arguments,1))},Client}();module.exports=Client},function(e,r){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,r){void 0===r&&(r=0);for(var t=r;t<this.length;t++)if(this[t]===e)return t;return-1}),Object.assign||(Object.assign=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(var o=function(r){r&&Object.keys(r).forEach(function(t){return e[t]=r[t]})},n=0,i=r;n<i.length;n++){var s=i[n];o(s)}return e})},function(e,r,t){var o,n,i;!function(s,a){"use strict";n=[t(4)],o=a,i="function"==typeof o?o.apply(r,n):o,!(void 0!==i&&(e.exports=i))}(this,function(e){"use strict";var r=/(^|@)\S+\:\d+/,t=/^\s*at .*(\S+\:\d+|\(native\))/m,o=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(t))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(e.indexOf(":")===-1)return[e];var r=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,t=r.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(r){var o=r.stack.split("\n").filter(function(e){return!!e.match(t)},this);return o.map(function(r){r.indexOf("(eval ")>-1&&(r=r.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var t=r.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),o=this.extractLocation(t.pop()),n=t.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new e({functionName:n,fileName:i,lineNumber:o[1],columnNumber:o[2],source:r})},this)},parseFFOrSafari:function(r){var t=r.stack.split("\n").filter(function(e){return!e.match(o)},this);return t.map(function(r){if(r.indexOf(" > eval")>-1&&(r=r.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),r.indexOf("@")===-1&&r.indexOf(":")===-1)return new e({functionName:r});var t=r.split("@"),o=this.extractLocation(t.pop()),n=t.join("@")||void 0;return new e({functionName:n,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:r})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(r){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,o=r.message.split("\n"),n=[],i=2,s=o.length;i<s;i+=2){var a=t.exec(o[i]);a&&n.push(new e({fileName:a[2],lineNumber:a[1],source:o[i]}))}return n},parseOpera10:function(r){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=r.stacktrace.split("\n"),n=[],i=0,s=o.length;i<s;i+=2){var a=t.exec(o[i]);a&&n.push(new e({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:o[i]}))}return n},parseOpera11:function(t){var o=t.stack.split("\n").filter(function(e){return!!e.match(r)&&!e.match(/^Error created at/)},this);return o.map(function(r){var t,o=r.split("@"),n=this.extractLocation(o.pop()),i=o.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(t=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===t||"[arguments not available]"===t?void 0:t.split(",");return new e({functionName:s,args:a,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:r})},this)}}})},function(e,r,t){var o,n,i;!function(t,s){"use strict";n=[],o=s,i="function"==typeof o?o.apply(r,n):o,!(void 0!==i&&(e.exports=i))}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e){return e[0].toUpperCase()+e.substring(1)}function t(e){return function(){return this[e]}}function o(e){if(e instanceof Object)for(var t=n.concat(i.concat(s.concat(a))),o=0;o<t.length;o++)e.hasOwnProperty(t[o])&&void 0!==e[t[o]]&&this["set"+r(t[o])](e[t[o]])}var n=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],a=["args"];o.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof o)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new o(e)}},toString:function(){var r=this.getFunctionName()||"{anonymous}",t="("+(this.getArgs()||[]).join(",")+")",o=this.getFileName()?"@"+this.getFileName():"",n=e(this.getLineNumber())?":"+this.getLineNumber():"",i=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return r+t+o+n+i}};for(var c=0;c<n.length;c++)o.prototype["get"+r(n[c])]=t(n[c]),o.prototype["set"+r(n[c])]=function(e){return function(r){this[e]=Boolean(r)}}(n[c]);for(var u=0;u<i.length;u++)o.prototype["get"+r(i[u])]=t(i[u]),o.prototype["set"+r(i[u])]=function(r){return function(t){if(!e(t))throw new TypeError(r+" must be a Number");this[r]=Number(t)}}(i[u]);for(var p=0;p<s.length;p++)o.prototype["get"+r(s[p])]=t(s[p]),o.prototype["set"+r(s[p])]=function(e){return function(r){this[e]=String(r)}}(s[p]);return o})},function(e,r,t){"use strict";function o(e){var r=e.errors[0];if(""!==r.type&&"Error"!==r.type)return e;var t=r.message.match(n);return null!==t&&(r.type=t[1],r.message=t[2]),e}var n=new RegExp(["^","\\[(\\$.+)\\]","\\s","(.+)","$"].join(""));Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},function(module,exports,__webpack_require__){"use strict";function filter(e){os&&(e.context.os=os.type()+"/"+os.release(),e.context.architecture=os.arch(),e.context.hostname=os.hostname()),e.context.platform=myProcess.platform,e.context.rootDirectory||(e.context.rootDirectory=myProcess.cwd()),myProcess.env.NODE_ENV&&(e.context.environment=myProcess.env.NODE_ENV),e.params.process={pid:myProcess.pid,cwd:myProcess.cwd(),execPath:myProcess.execPath,argv:myProcess.argv};for(var r in["uptime","cpuUsage","memoryUsage"])myProcess[r]&&(e.params.process[r]=myProcess[r]());return os&&(e.params.os={homedir:os.homedir(),uptime:os.uptime(),freemem:os.freemem(),totalmem:os.totalmem(),loadavg:os.loadavg()}),e}var myProcess,os;try{myProcess=eval("process"),os=eval("require")("os")}catch(e){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=filter},function(e,r,t){"use strict";function o(e){var r=e.errors[0].message;return n.indexOf(r)>-1?null:e}var n=["Script error","Script error."];Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},function(e,r,t){"use strict";function o(e){var r=e.errors[0];if(""!==r.type&&"Error"!==r.type)return e;var t=r.message.match(n);return null!==t&&(r.type=t[1],r.message=t[2]),e}var n=new RegExp(["^","Uncaught\\s","(.+?)",":\\s","(.+)","$"].join(""));Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},function(e,r,t){"use strict";function o(e){return window.navigator&&window.navigator.userAgent&&(e.context.userAgent=window.navigator.userAgent),window.location&&(e.context.url=String(window.location),e.context.rootDirectory=window.location.protocol+"//"+window.location.host),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},function(e,r,t){"use strict";function o(e,r){try{return e[r]}catch(e){return}}function n(e,r,t){function n(e){for(var r=c.indexOf(e),t=[a[r]],n=r;n>=0;n--)c[n]&&o(c[n],t[0])===e&&(e=c[n],t.unshift(a[n]));return"~"+t.join(".")}function i(e,u,p){if(void 0===u&&(u=""),void 0===p&&(p=0),s++,s>r)return"[Truncated]";if(null===e||void 0===e)return e;switch(typeof e){case"boolean":case"number":case"string":case"function":return e;case"object":break;default:return String(e)}if(e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(c.indexOf(e)>=0)return"[Circular "+n(e)+"]";if(p++,p>t)return"[Truncated]";if(a.push(u),c.push(e),s--,"[object Array]"===Object.prototype.toString.apply(e)){var f=[];for(var l in e){var d=e[l];if(s++,s>=r)break;f.push(i(d,l,p))}return f}var h={};for(u in e)if(Object.prototype.hasOwnProperty.call(e,u)){if(s++,s>=r)break;var v=o(e,u);void 0!==v&&(h[u]=i(v,u,p))}return h}void 0===r&&(r=1e3),void 0===t&&(t=5);var s=0,a=[],c=[];return i(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},function(e,r,t){"use strict";function o(e,r){var t;try{t=n.parse(e)}catch(e){console&&console.warn&&console.warn("airbrake-js: error-stack-parser failed",e),t=[]}for(var o=[],i=0,s=t;i<s.length;i++){var a=s[i];o.push({function:a.functionName||"",file:a.fileName,line:a.lineNumber,column:a.columnNumber})}var c;c=e.name?e.name:"";var u;return u=e.message?String(e.message):String(e),""===c&&""===u&&0===o.length?void(console&&console.warn&&console.warn("airbrake: can not process error",e)):void r("stacktracejs",{type:c,message:u,backtrace:o})}var n=t(3);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},function(e,r,t){"use strict";var o=function(){function e(e){this.onResolved=[],this.onRejected=[],e&&e(this.resolve.bind(this),this.reject.bind(this))}return e.prototype.then=function(e,r){return e&&(this.resolvedWith?e(this.resolvedWith):this.onResolved.push(e)),r&&(this.rejectedWith?r(this.rejectedWith):this.onRejected.push(r)),this},e.prototype.catch=function(e){return this.rejectedWith?e(this.rejectedWith):this.onRejected.push(e),this},e.prototype.resolve=function(e){if(this.resolvedWith||this.rejectedWith)throw new Error("Promise is already resolved or rejected");this.resolvedWith=e;for(var r=0,t=this.onResolved;r<t.length;r++){var o=t[r];o(e)}return this},e.prototype.reject=function(e){if(this.resolvedWith||this.rejectedWith)throw new Error("Promise is already resolved or rejected");this.rejectedWith=e;for(var r=0,t=this.onRejected;r<t.length;r++){var o=t[r];o(e)}return this},e}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},function(e,r,t){"use strict";function o(e,r,t){var o=r.host+"/api/v3/projects/"+r.projectId+"/create-notice?key="+r.projectKey,i=n.default(e),s=new XMLHttpRequest;s.open("POST",o,!0),s.send(i),s.onreadystatechange=function(){if(4===s.readyState){if(s.status>=200&&s.status<500){var r=JSON.parse(s.responseText);if(r.id)return e.id=r.id,void t.resolve(e);if(r.error){var o=new Error(r.error);return void t.reject(o)}}var n=s.responseText.trim(),i=new Error("airbrake: unexpected response: code="+s.status+" body='"+n+"'");t.reject(i)}}}var n=t(0);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},function(e,r,t){"use strict";function o(e,r,t){i++;var o="airbrakeCb"+String(i);window[o]=function(r){try{delete window[o]}catch(e){window[o]=void 0}if(r.id)return e.id=r.id,void t.resolve(e);if(r.error){var n=new Error(r.error);return void t.reject(n)}var i=new Error(r);t.reject(i)};var s=encodeURIComponent(n.default(e)),a=r.host+"/api/v3/projects/"+r.projectId+"/create-notice?key="+r.projectKey+"&callback="+o+"&body="+s,c=window.document,u=c.getElementsByTagName("head")[0],p=c.createElement("script");p.src=a,p.onload=function(){return u.removeChild(p)},p.onerror=function(){u.removeChild(p);var e=new Error("airbrake: JSONP script error");t.reject(e)},u.appendChild(p)}var n=t(0),i=0;Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},function(module,exports,__webpack_require__){"use strict";function report(e,r,t){var o=r.host+"/api/v3/projects/"+r.projectId+"/notices?key="+r.projectKey,n=jsonify_notice_1.default(e);request({url:o,method:"POST",body:n,headers:{"content-type":"application/json"},timeout:r.timeout},function(r,o,n){if(r)return void t.reject(r);if(o.statusCode>=200&&o.statusCode<500){var i=JSON.parse(n);if(i.id)return e.id=i.id,void t.resolve(e);if(i.error){var s=new Error(i.error);return void t.reject(s)}}n=n.trim();var a=new Error("airbrake: unexpected response: code="+o.statusCode+" body='"+n+"'");t.reject(a)})}var jsonify_notice_1=__webpack_require__(0),request;try{request=eval("require")("request")}catch(e){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=report},function(e,r,t){"use strict";function o(e){return"undefined"!=typeof XMLHttpRequest?e.host?"xhr":"compat":"undefined"!=typeof window?"jsonp":"node"}r.detectReporter=o},function(e,r,t){"use strict";function o(e,r,t){var o=r.host+"/api/v3/projects/"+r.projectId+"/notices?key="+r.projectKey,i=n.default(e),s=new XMLHttpRequest;s.open("POST",o,!0),s.setRequestHeader("Content-Type","application/json"),s.send(i),s.onreadystatechange=function(){if(4===s.readyState){if(s.status>=200&&s.status<500){var r=JSON.parse(s.responseText);if(r.id)return e.id=r.id,void t.resolve(e);if(r.error){var o=new Error(r.error);return void t.reject(o)}}var n=s.responseText.trim(),i=new Error("airbrake: unexpected response: code="+s.status+" body='"+n+"'");t.reject(i)}}}var n=t(0);Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},function(e,r,t){t(2),e.exports=t(1)}])});
//# sourceMappingURL=client.min.js.map